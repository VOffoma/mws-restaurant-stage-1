let restaurants,neighborhoods,cuisines;var newMap,markers=[];function notify(type,title,message){VanillaToasts.create({title:title,text:message,type:type,timeout:5e3})}function isOnline(){navigator.onLine?(console.log("online"),notify("info","Connection Status","You are currently online!")):(console.log("offline"),notify("warning","Connection Status","You are currently offline."))}document.addEventListener("readystatechange",event=>{"complete"===event.target.readyState&&(window.addEventListener("online",isOnline),window.addEventListener("offline",isOnline),isOnline())}),document.addEventListener("DOMContentLoaded",async event=>{initMap(),registerServiceWorker(),fetchNeighborhoods(),fetchCuisines()}),registerServiceWorker=(()=>{navigator.serviceWorker&&navigator.serviceWorker.register("sw.js").then(()=>console.log("Registration worked")).catch(error=>console.log(error))}),fetchNeighborhoods=(()=>{DBHelper.fetchNeighborhoods().then(neighborhoods=>{self.neighborhoods=neighborhoods,fillNeighborhoodsHTML()}).catch(error=>console.error(error))}),fillNeighborhoodsHTML=((neighborhoods=self.neighborhoods)=>{const select=document.getElementById("neighborhoods-select");neighborhoods.forEach(neighborhood=>{const option=document.createElement("option");option.innerHTML=neighborhood,option.value=neighborhood,select.append(option)})}),fetchCuisines=(()=>{DBHelper.fetchCuisines().then(cuisines=>{self.cuisines=cuisines,fillCuisinesHTML()}).catch(error=>console.error(error))}),fillCuisinesHTML=((cuisines=self.cuisines)=>{const select=document.getElementById("cuisines-select");cuisines.forEach(cuisine=>{const option=document.createElement("option");option.innerHTML=cuisine,option.value=cuisine,select.append(option)})}),initMap=(()=>{updateRestaurants(),self.newMap=L.map("map",{center:[40.722216,-73.987501],zoom:12,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:constants.mapboxToken,maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap)}),updateRestaurants=(()=>{const cSelect=document.getElementById("cuisines-select"),nSelect=document.getElementById("neighborhoods-select"),cIndex=cSelect.selectedIndex,nIndex=nSelect.selectedIndex,cuisine=cSelect[cIndex].value,neighborhood=nSelect[nIndex].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(cuisine,neighborhood).then(restaurants=>{resetRestaurants(restaurants),fillRestaurantsHTML()}).catch(error=>console.log(error))}),resetRestaurants=(restaurants=>{self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(marker=>marker.remove()),self.markers=[],self.restaurants=restaurants}),fillRestaurantsHTML=((restaurants=self.restaurants)=>{const div=document.getElementById("restaurants-list");restaurants.forEach(restaurant=>{div.append(createRestaurantHTML(restaurant))}),addMarkersToMap()}),createRestaurantHTML=(restaurant=>{const article=document.createElement("article"),image=document.createElement("img");image.alt=restaurant.name,image.className="restaurant-img";const{sourceSet:sourceSet,sizes:sizes,src:src}=getImageSourceSetAndSizes(restaurant);image.srcset=sourceSet,image.sizes=sizes,image.src=src;const imageDiv=document.createElement("div");imageDiv.append(image),article.append(imageDiv);const detailsDiv=document.createElement("div"),name=document.createElement("h3");name.innerHTML=restaurant.name,detailsDiv.append(name);const neighborhood=document.createElement("p");neighborhood.innerHTML=restaurant.neighborhood,detailsDiv.append(neighborhood);const address=document.createElement("p");address.innerHTML=restaurant.address,detailsDiv.append(address);const more=document.createElement("a");return more.innerHTML="View Details",more.setAttribute("aria-label",`View details for ${restaurant.name} restaurant`),more.href=DBHelper.urlForRestaurant(restaurant),detailsDiv.append(more),article.append(detailsDiv),article}),getImageSourceSetAndSizes=(restaurant=>{let image=restaurant.photograph;return{sourceSet:`images/${image}-150_small.jpg 150w, images/${image}-270_medium.jpg 270w, images/${image}-540_large.jpg 540w`,sizes:"(max-width: 659px) 133px, (max-width: 760px) 240px,  (min-width: 760px) 270px",src:`images/${image}-540_large.jpg`}}),addMarkersToMap=((restaurants=self.restaurants)=>{restaurants.forEach(restaurant=>{const marker=DBHelper.mapMarkerForRestaurant(restaurant,self.newMap);marker.on("click",function(){window.location.href=marker.options.url}),self.markers.push(marker)})});
//# sourceMappingURL=../path/to/sourcemap.map